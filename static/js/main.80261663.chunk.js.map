{"version":3,"sources":["actions/index.js","Pages/Landing.js","webgl/VUI/shaderConsts.js","webgl/VUI/screenConsts.js","webgl/VUI/speaking.js","webgl/VUI/listen.js","webgl/VUI/visualization.js","webgl/VUI/thinking.js","webgl/VUI/reassure.js","webgl/VUI/presence.js","utility/bind.js","webgl/VUI/vuiClass.js","webgl/shaders/ripples.glsl.js","webgl/webgl-app.js","webgl/helpers/css3d.js","webgl/shaders/bg.glsl.js","speech/vui-instructions.js","utility/date.js","components/navigation.js","speech/user-instructions.js","Pages/VUI.js","utility/string.js","utility/animation.js","Pages/Matrix.js","Pages/About.js","App.js","reportWebVitals.js","reducers/defaultState.js","reducers/index.js","index.js"],"names":["changeVUIState","state","visState","playSound","type","payload","stateStr","Landing","titleRef","useRef","blurbRef","formRef","containerRef","refs","useEffect","tl","gsap","timeline","delay","ease","forEach","ref","index","to","current","opacity","duration","skewY","className","id","initial_ripple_size","initial_ripple_opaque","circle_pos","speakingOn","repeatTl","repeat","origY","this","mesh","position","y","topY","uniforms","u_ripple_layers","value","Power2","easeInOut","speakingOff","killTweensOf","listenOn","isAnimatingSound","scale","x","inVis","u_ripple_size","Power1","u_ripple_intensity","initial_ripple_intensity","u_rIncre","listenOff","that","animateListenOff","setTimeout","thinkingOn","vuiObj","Power4","activateVisualization","callbackFunc","isAnimating","onComplete","sceneOutlinePass","edgeStrength","finishVisualization","u_bIncre","u_opaque","rotation","z","Math","PI","thinkingOff","reassuringOn","u_gIncre","animateAppear","console","log","u_alpha","animateDisappear","bindFuncWithObj","obj","func","methodStr","bind","vuiCircle","outlinePass","init","texture","TextureLoader","load","u_tex","u_duration","u_time","u_delt","material","ShaderMaterial","vertexShader","fragmentShader","transparent","geometry","CircleGeometry","Mesh","set","bindObj","BIND_FUNCS","FUNC_NAMES","length","bindNewMethods","update","delta","undefined","changeState","prevState","WebGLApp","htmlElem","cssElem","cssRef","windowInfo","setup","scene","Scene","background","Color","camera","PerspectiveCamera","width","height","lookAt","setupRenderers","controls","OrbitControls","renderer","domElement","clock","Clock","createLights","createBackground","initPostprocessing","add","selectedObjects","addCSSElems","setupListener","listener","AudioListener","audioLoader","AudioLoader","sound","Audio","onEnded","toggleSpeakingFunc","loadV","soundClip","toString","buffer","setBuffer","setLoop","play","phoneCutout","domRef","planeColor","clipPlane","style","boxSizing","Object3D","css3dObject","CSS3DObject","MeshPhongMaterial","color","blending","NoBlending","BoxGeometry","castShadow","receiveShadow","lightShadowMesh","createElemObject","window","screen","WebGLRenderer","antialias","setSize","shadowMap","enabled","appendChild","cssRenderer","CSS3DRenderer","innerWidth","innerHeight","top","createGridHelper","gridHelper","GridHelper","composer","EffectComposer","renderPass","RenderPass","addPass","OutlinePass","Vector2","edgeGlow","edgeThickness","visibleEdgeColor","downSampleRatio","effectFXAA","ShaderPass","FXAAShader","renderToScreen","ambientLight","AmbientLight","light","DirectionalLight","textureLoader","path","f_ex","textures","i","push","visTextures","introTexture","visIntroTex","PlaneGeometry","bgUniforms","u_tex1","u_tex2","u_resolution","u_useTexLerp","lerpBackground","vuiState","playVuiSounds","renderScene","render","handleResize","newWidth","newHeight","aspect","updateProjectionMatrix","rafId","requestAnimationFrame","getDelta","getElapsedTime","isRendering","cancelAnimationFrame","vis_vui_instructions","vui_texts","monthNames","NavigationBar","class","user_instructions","VUI","useSelector","dispatch","useDispatch","webglApp","phoneCutoutRef","cssContainerRef","useState","userText","setUserText","d","Date","getMonth","getDate","getFullYear","vuiTextArr","setVuiText","convoRef","instructionTextArr","setInstructionText","instructionTextNum","setInstructionNum","userTextNum","setUserTextNum","vuiTalking","setVuiTalking","endIndex","newArr","addEventListener","onWindowResize","document","handleStartListen","handleStopListen","removeEventListener","vuiStateStr","increaseInstructionText","num","animateTextOut","fullCallBack","animateTextIn","needHelpOnComp","visualizationOnComp","ripplesOnComp","blueWaterOnComp","liliesOnComp","calmerOnComp","commands","command","callback","useSpeechRecognition","isFuzzyMatch","transcript","listening","resetTranscript","browserSupportsSpeechRecognition","event","SpeechRecognition","startListening","continuous","string","stopListening","charAt","toUpperCase","slice","src","alt","map","text","getDefaultTimeline","node","original","dest","paused","then","Matrix","About","App","location","key","pathname","TransitionGroup","component","Transition","native","appear","onEnter","playTransitionIn","onExiting","playTransitionOut","timeout","enter","exit","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","DEFAULT_STATE","isSpeaking","userName","allReducers","combineReducers","action","soundState","soundsState","username","visPhase","visPhaseInt","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.80261663.chunk.js","sourcesContent":["export const changeVUIState = (state, visState, playSound) => {\n  return {\n    type: \"VUI_STATE_CHANGE\",\n    payload: { stateStr: state, visState: visState, playSound: playSound },\n  };\n};\n\nexport const changeSoundState = (stateBool) => {\n  return {\n    type: \"SOUND_STATE_CHANGE\",\n    payload: stateBool,\n  };\n};\n\nexport const changeUserName = (nameStr) => {\n  return {\n    type: \"USER_NAME_CHANGE\",\n    payload: nameStr,\n  };\n};\n","import \"../styles/utility.css\";\nimport \"../styles/app.css\";\nimport \"../styles/landing.css\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { changeUserName } from \"../actions\";\nimport { useState, useEffect, useRef } from \"react\";\nimport gsap from \"gsap\";\n\nfunction Landing() {\n  const titleRef = useRef();\n  const blurbRef = useRef();\n  const formRef = useRef();\n  const containerRef = useRef();\n  const refs = [titleRef, blurbRef, formRef];\n\n  useEffect(() => {\n    let tl = gsap.timeline({ delay: 0.5 });\n    const ease = \"power3.out\";\n    refs.forEach((ref, index) => {\n      tl.to(\n        ref.current,\n        {\n          opacity: 1,\n          duration: 2,\n          ease: ease,\n        },\n        index * 1.2\n      );\n    });\n    tl.to(\n      containerRef.current,\n      {\n        opacity: 1,\n        \"margin-top\": 0,\n        skewY: \"-10deg\",\n        duration: 3,\n        ease: ease,\n      },\n      1\n    );\n  }, []);\n\n  return (\n    <div className=\"root\">\n      <div className=\"landing__container\">\n        <div className=\"content__container\" ref={containerRef}>\n          <h1 className=\"title__text\" ref={titleRef}>\n            {\" \"}\n            Nova{\" \"}\n          </h1>\n          <h4 className=\"landing__blurb\" ref={blurbRef}>\n            Meet Nova, a voice user-interface designed to help users navigate\n            their anxiety through guided, interactive mindfulness exercises.\n          </h4>\n          <Link to=\"/nova\">\n            {\" \"}\n            <button id=\"enter__btn\">Let's Begin </button>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Landing;\n","export const initial_ripple_size = 2.5;\nexport const initial_ripple_intensity = 5.0;\nexport const intense_ripple = 6.0;\nexport const initial_ripple_opaque = 0.025;\nexport const ripple_opaque = 0.8;\n","export const circle_pos = {\n  x: -20,\n  y: 7,\n  z: 1,\n};\n","import gsap, { Power2 } from \"gsap/gsap-core\";\nimport { initial_ripple_intensity, intense_ripple } from \"./shaderConsts\";\n\nexport function speakingOn() {\n  var repeatTl = gsap.timeline({ repeat: -1 });\n  const moveDiff = 0.75;\n  const origY = this.mesh.position.y;\n  const topY = this.mesh.position.y + moveDiff;\n  const botY = this.mesh.position.y - moveDiff;\n  gsap.to(this.uniforms.u_ripple_layers, {\n    value: intense_ripple,\n    duration: 3.0,\n    ease: Power2.easeInOut,\n  });\n  repeatTl.to(this.mesh.position, {\n    y: topY,\n    duration: 2,\n    ease: Power2.easeInOut,\n  });\n  repeatTl.to(this.mesh.position, {\n    y: origY,\n    duration: 2,\n    ease: Power2.easeInOut,\n  });\n  repeatTl.to(this.mesh.position, {\n    y: topY,\n    duration: 2,\n    ease: Power2.easeInOut,\n  });\n  repeatTl.to(this.mesh.position, {\n    y: origY,\n    duration: 2,\n    ease: Power2.easeInOut,\n  });\n}\n\nexport function speakingOff() {\n  var tl = gsap.timeline();\n  gsap.killTweensOf(this.mesh.position);\n  tl.to(this.uniforms.u_ripple_layers, {\n    value: initial_ripple_intensity,\n    duration: 2.0,\n    ease: Power2.easeInOut,\n  });\n}\n","import gsap, { Power4, Power1, Power2 } from \"gsap/gsap-core\";\nimport { initial_ripple_intensity, initial_ripple_size } from \"./shaderConsts\";\n\nexport function listenOn() {\n  this.isAnimatingSound = true;\n  var tl = gsap.timeline();\n  tl.to(\n    this.mesh.scale,\n    {\n      x: this.inVis ? 0.5 : 1.2,\n      y: this.inVis ? 0.5 : 1.2,\n      duration: 2,\n      ease: Power2.easeInOut,\n    },\n    0.5\n  );\n  tl.to(\n    this.uniforms.u_ripple_size,\n    {\n      value: initial_ripple_size * 1.2,\n      duration: 5,\n      ease: Power1.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_ripple_intensity,\n    {\n      value: initial_ripple_intensity * 1.2,\n      duration: 1,\n      ease: Power1.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_rIncre,\n    {\n      value: 0.2,\n      duration: 1,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n}\n\nexport function listenOff() {\n  const that = this;\n  if (this.inVis) {\n    animateListenOff(that);\n    setTimeout(function () {\n      that.thinkingOn();\n    }, 4000);\n  } else {\n    animateListenOff(this);\n  }\n}\n\nfunction animateListenOff(vuiObj) {\n  var tl = gsap.timeline();\n  tl.to(\n    vuiObj.uniforms.u_rIncre,\n    {\n      value: 0,\n      duration: 1,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    vuiObj.mesh.scale,\n    {\n      x: vuiObj.inVis ? 0.4 : 1,\n      y: vuiObj.inVis ? 0.4 : 1,\n      duration: 2,\n      ease: Power4.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    vuiObj.uniforms.u_ripple_size,\n    {\n      value: initial_ripple_size,\n      duration: 5,\n      ease: Power1.easeInOut,\n    },\n    0\n  );\n}\n","import gsap, { Power2 } from \"gsap/gsap-core\";\n\nexport function activateVisualization(callbackFunc) {\n  this.isAnimating = true;\n  const that = this;\n  const tl = gsap.timeline({\n    onComplete: function () {\n      that.isAnimating = false;\n      that.inVis = true;\n      callbackFunc();\n    },\n  });\n  tl.to(\n    this.mesh.scale,\n    {\n      x: 0.4,\n      y: 0.4,\n      duration: 2,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(this.mesh.position, {\n    y: -15.5,\n    duration: 2,\n    ease: Power2.easeInOut,\n  });\n  tl.to(this.sceneOutlinePass, {\n    edgeStrength: 0.7,\n    duration: 1,\n    ease: Power2.easeInOut,\n  });\n}\n\nexport function finishVisualization() {\n  const tl = gsap.timeline();\n  tl.to(\n    this.mesh.scale,\n    {\n      x: 2,\n      y: 2,\n      duration: 2,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.mesh.position,\n    {\n      y: 8,\n      duration: 3,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n}\n","import gsap, { Power1, Power2 } from \"gsap/gsap-core\";\nimport { initial_ripple_opaque, ripple_opaque } from \"./shaderConsts\";\n\nexport function thinkingOn() {\n  var tl = gsap.timeline();\n  const opqDur = 2;\n  tl.to(\n    this.uniforms.u_bIncre,\n    {\n      value: 0.1,\n      duration: 1,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_rIncre,\n    {\n      value: 0.1,\n      duration: 1,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_opaque,\n    {\n      value: ripple_opaque,\n      duration: opqDur,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.mesh.rotation,\n    {\n      z: Math.PI * 2,\n      duration: 2,\n      ease: Power1.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_opaque,\n    {\n      value: initial_ripple_opaque,\n      duration: opqDur,\n      ease: Power2.easeInOut,\n    },\n    2\n  );\n  tl.to(\n    this.uniforms.u_bIncre,\n    {\n      value: 0,\n      duration: 0.5,\n      ease: Power2.easeInOut,\n    },\n    2\n  );\n  tl.to(\n    this.uniforms.u_rIncre,\n    {\n      value: 0,\n      duration: 0.5,\n      ease: Power2.easeInOut,\n    },\n    2\n  );\n}\n\nexport function thinkingOff() {\n  var tl = gsap.timeline();\n  const opqDur = 2;\n  gsap.killTweensOf(this.mesh.rotation);\n  tl.to(this.mesh.rotation, {\n    duration: 3,\n    ease: Power1.easeInOut,\n  });\n  tl.to(this.uniforms.u_opaque, {\n    value: initial_ripple_opaque,\n    duration: 1,\n    ease: Power2.easeInOut,\n  });\n  tl.to(this.uniforms.u_bIncre, {\n    value: 0,\n    duration: 0.5,\n    ease: Power2.easeInOut,\n  });\n  tl.to(this.uniforms.u_rIncre, {\n    value: 0,\n    duration: 0.5,\n    ease: Power2.easeInOut,\n  });\n}\n","import gsap, { Power2 } from \"gsap/gsap-core\";\nimport {\n  initial_ripple_intensity,\n  initial_ripple_opaque,\n  initial_ripple_size,\n} from \"./shaderConsts\";\n\nexport function reassuringOn() {\n  var tl = gsap.timeline();\n  tl.to(\n    this.mesh.rotation,\n    {\n      z: Math.PI * 2,\n      duration: 2,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_rIncre,\n    {\n      value: 0.8,\n      duration: 1.5,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_gIncre,\n    {\n      value: -0.07,\n      duration: 1.5,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_ripple_layers,\n    {\n      value: 5.5,\n      duration: 2,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_opaque,\n    {\n      value: 5.0,\n      duration: 2.0,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(this.uniforms.u_ripple_size, { value: 1.2, duration: 2 }, 0);\n  // go back\n  tl.to(this.uniforms.u_rIncre, {\n    value: 0,\n    duration: 1.5,\n    ease: Power2.easeInOut,\n    delay: 5,\n  });\n  tl.to(\n    this.uniforms.u_gIncre,\n    {\n      value: 0,\n      duration: 1.5,\n      ease: Power2.easeInOut,\n    },\n    \"end\"\n  );\n  tl.to(\n    this.uniforms.u_ripple_layers,\n    {\n      value: initial_ripple_intensity,\n      duration: 2,\n      ease: Power2.easeInOut,\n    },\n    \"end\"\n  );\n  tl.to(\n    this.uniforms.u_opaque,\n    {\n      value: initial_ripple_opaque,\n      duration: 2.0,\n      ease: Power2.easeInOut,\n    },\n    \"end\"\n  );\n  tl.to(\n    this.uniforms.u_ripple_size,\n    { value: initial_ripple_size, duration: 2 },\n    \"end\"\n  );\n}\n","import gsap, { Power2 } from \"gsap/gsap-core\";\n\nexport function animateAppear() {\n  console.log(this);\n  const dur = 3;\n  const tl = gsap.timeline({});\n  tl.to(\n    this.uniforms.u_alpha,\n    {\n      value: 1,\n      duration: dur,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.sceneOutlinePass,\n    {\n      edgeStrength: 1,\n      duration: dur,\n      ease: Power2.easeInOut,\n    },\n    1\n  );\n}\n\nexport function animateDisappear() {\n  const tl = gsap.timeline();\n  const dur = 3;\n  tl.to(\n    this.mesh.scale,\n    {\n      x: 0,\n      y: 0,\n      z: 0,\n      duration: dur,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.uniforms.u_alpha,\n    {\n      value: 0,\n      duration: dur,\n      ease: Power2.easeInOut,\n    },\n    0\n  );\n  tl.to(\n    this.sceneOutlinePass,\n    {\n      edgeStrength: 0,\n      duration: dur,\n      ease: Power2.easeInOut,\n    },\n    1\n  );\n}\n","export const bindNewMethods = (bindObj, BIND_FUNCS, FUNC_NAMES) => {\n  if (BIND_FUNCS.length !== FUNC_NAMES.length) {\n    console.log(\"Wrong inputs to bind new methods\");\n    return;\n  }\n  BIND_FUNCS.forEach((func, index) => {\n    bindFuncWithObj(bindObj, func, FUNC_NAMES[index]);\n  });\n};\n\n/**\n * Private\n */\n\nconst bindFuncWithObj = (obj, func, methodStr) => {\n  obj[methodStr] = func.bind(obj);\n};\n","import { CircleGeometry, Mesh, ShaderMaterial, TextureLoader } from \"three\";\nimport { vshader, fshader } from \"../shaders/ripples.glsl\";\nimport {\n  initial_ripple_intensity,\n  initial_ripple_opaque,\n  initial_ripple_size,\n} from \"./shaderConsts\";\nimport { circle_pos } from \"./screenConsts\";\nimport { DEBUG_STATES } from \"../../utility/debug\";\nimport { speakingOn, speakingOff } from \"./speaking\";\nimport { listenOn, listenOff } from \"./listen\";\nimport { activateVisualization, finishVisualization } from \"./visualization\";\nimport { thinkingOn, thinkingOff } from \"./thinking\";\nimport { reassuringOn } from \"./reassure\";\nimport { animateAppear, animateDisappear } from \"./presence\";\nimport { bindNewMethods } from \"../../utility/bind\";\n\nconst appear = false;\n\nclass vuiCircle {\n  constructor(outlinePass) {\n    this.state = \"none\";\n    this.sceneOutlinePass = outlinePass;\n    this.isAnimating = false;\n    this.inVis = false;\n  }\n\n  init = () => {\n    const loader = new TextureLoader();\n    const texture = loader.load(\"assets/texture/static_grain.png\");\n    this.uniforms = {\n      u_tex: {\n        value: texture,\n      },\n      u_duration: {\n        value: 5.0,\n      },\n      u_time: {\n        value: 0,\n      },\n      u_ripple_size: {\n        value: initial_ripple_size,\n      },\n      u_ripple_layers: {\n        value: initial_ripple_intensity,\n      },\n      u_rIncre: {\n        value: 0.0,\n      },\n      u_bIncre: {\n        value: 0.0,\n      },\n      u_gIncre: {\n        value: 0.0,\n      },\n      u_opaque: {\n        value: initial_ripple_opaque,\n      },\n      u_alpha: {\n        value: appear ? 1.0 : 0.0,\n      },\n      u_delt: {\n        value: 1.0,\n      },\n    };\n    const material = new ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: vshader,\n      fragmentShader: fshader,\n      transparent: true,\n    });\n    const geometry = new CircleGeometry(4.5, 32);\n    this.mesh = new Mesh(geometry, material);\n    this.mesh.position.set(circle_pos.x, circle_pos.y, 0.5);\n    //this.mesh.scale.set(0, 0, 0);\n    if (appear) {\n      this.sceneOutlinePass.edgeStrength = 1;\n    }\n    const BIND_FUNCS = [\n      speakingOn,\n      speakingOff,\n      listenOn,\n      listenOff,\n      reassuringOn,\n      thinkingOn,\n      thinkingOff,\n      animateAppear,\n      animateDisappear,\n      activateVisualization,\n      finishVisualization,\n    ];\n    const FUNC_NAMES = [\n      \"speakingOn\",\n      \"speakingOff\",\n      \"listenOn\",\n      \"listenOff\",\n      \"reassuringOn\",\n      \"thinkingOn\",\n      \"thinkingOff\",\n      \"animateAppear\",\n      \"animateDisappear\",\n      \"activateVisualization\",\n      \"finishVisualization\",\n    ];\n    bindNewMethods(this, BIND_FUNCS, FUNC_NAMES);\n  };\n\n  update = (delta) => {\n    if (this.uniforms !== undefined) {\n      this.uniforms.u_time.value += delta;\n    }\n  };\n\n  /**Private */\n\n  changeState = (state) => {\n    if (this.isAnimating) return;\n\n    console.log(\"Vui state has changed to: \", state);\n    const prevState = this.state;\n    this.state = state;\n\n    if (prevState === this.state) return;\n\n    switch (this.state) {\n      case \"appearing\":\n        this.animateAppear();\n        break;\n      case \"listening\":\n        if (prevState === \"none\") {\n          return;\n        }\n        this.listenOn();\n        break;\n      case \"stop_listening\":\n        this.listenOff();\n        break;\n      case \"speaking\":\n        this.speakingOn();\n        break;\n      case \"stop_speaking\":\n        this.speakingOff();\n        break;\n      case \"reassuring\":\n        this.reassuringOn();\n        break;\n      case \"thinking\":\n        this.thinkingOn();\n        break;\n      case \"stop_thinking\":\n        this.thinkingOff();\n        break;\n      case \"disappearing\":\n        this.animateDisappear();\n        break;\n      case \"activate_visualization\":\n        const callbackFunc = this.speakingOn;\n        this.activateVisualization(callbackFunc);\n        break;\n      case \"visualization\":\n        //this.thinkingOn();\n        break;\n      case \"finish_visualization\":\n        this.finishVisualization();\n        break;\n      default:\n        return;\n    }\n  };\n}\n\nexport default vuiCircle;\n","const vshader = `\n#define PI 3.141592653589\n\nfloat random (vec2 st) {\n  return fract(sin(dot(st.xy, vec2(5.9898,78.233)))* 43758.5453123);\n}\n\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\nuniform float u_time;\n\nvoid main() {\t\n  v_uv = uv;\n  v_position = position;\n  v_normal = normal;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( v_position, 1.0 );\n}\n`;\n\nconst fshader = `\n#define PI 3.141592653589\n\nfloat random (vec2 st) {\n  return fract(sin(dot(st.xy, vec2(5.9898,78.233)))* 43758.5453123);\n}\n\nuniform sampler2D u_tex;\nuniform float u_duration;\nuniform float u_time;\nuniform float u_ripple_size;\nuniform float u_ripple_layers;\nuniform float u_rIncre;\nuniform float u_bIncre;\nuniform float u_gIncre;\nuniform float u_opaque;\nuniform float u_alpha;\nuniform float u_delt;\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nvoid main (void)\n{\n  float contrast = 1.0;\n  vec2 p = v_position.xy;\n  float len = length(p) / 1.5;\n  vec2 ripple = v_uv + p/len*u_opaque*cos(len*u_ripple_layers-u_time * u_ripple_size);\n  float delta = u_delt * (sin(mod(u_time, u_duration) * (15.0 * PI/u_duration)))/15.0*(random(ripple)*u_bIncre);\n  vec2 uv = mix(ripple, v_uv, 0.0);\n  vec3 rippled;\n  rippled = texture2D(u_tex, uv).rgb;\n  rippled.r += u_rIncre;\n  rippled.b += u_bIncre;\n  rippled.r -= u_bIncre;\n  rippled.g += u_gIncre;\n  rippled.rgb = ((rippled.rgb - 0.5) * max(contrast, 0.0)) + 0.5;\n  gl_FragColor = vec4(rippled, u_alpha); \n}\n`;\nexport { vshader, fshader };\n","import {\n  Scene,\n  Color,\n  PerspectiveCamera,\n  WebGLRenderer,\n  Mesh,\n  GridHelper,\n  AmbientLight,\n  Clock,\n  TextureLoader,\n  PlaneGeometry,\n  Vector2,\n  DirectionalLight,\n  ShaderMaterial,\n  Audio,\n  AudioListener,\n  AudioLoader,\n} from \"three\";\nimport { CSS3DRenderer } from \"three/examples/jsm/renderers/CSS3DRenderer\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { OutlinePass } from \"three/examples/jsm/postprocessing/OutlinePass\";\nimport { FXAAShader } from \"three/examples/jsm/shaders/FXAAShader\";\nimport vuiCircle from \"./VUI/vuiClass\";\nimport { bg_vshader, bg_fshader } from \"./shaders/bg.glsl\";\nimport { createElemObject } from \"./helpers/css3d\";\nimport gsap from \"gsap/all\";\nconst TEX_MAX = 14;\n\nexport default class WebGLApp {\n  constructor(htmlElem, cssElem, cssRef, windowInfo, func) {\n    this.htmlElem = htmlElem;\n    this.cssElem = cssElem;\n    this.cssRef = cssRef;\n    this.windowInfo = windowInfo;\n    this.rafId = 0;\n    this.isRendering = false;\n    this.soundClip = 0;\n    this.toggleSpeakingFunc = func;\n  }\n\n  setup = () => {\n    this.scene = new Scene();\n    this.scene.background = new Color(0xe6dffd); //Color(0xb6eafa);\n    this.camera = new PerspectiveCamera(\n      75,\n      this.windowInfo.width / this.windowInfo.height,\n      1,\n      1000\n    );\n    this.camera.position.set(0, 0, 30);\n    this.camera.lookAt(this.scene.position);\n    this.setupRenderers();\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.update();\n    this.clock = new Clock();\n    this.createLights();\n    this.createBackground();\n    this.initPostprocessing();\n    this.vuiObj = new vuiCircle(this.outlinePass);\n    this.vuiObj.init();\n    this.scene.add(this.vuiObj.mesh);\n    this.outlinePass.selectedObjects = [this.vuiObj.mesh];\n    this.addCSSElems();\n    this.setupListener();\n  };\n\n  setupListener = () => {\n    // create an AudioListener and add it to the camera\n    this.listener = new AudioListener();\n    this.camera.add(this.listener);\n    this.audioLoader = new AudioLoader();\n  };\n\n  playSound = () => {\n    const that = this;\n    const path = \"assets/audio/vui/\";\n    // create a global audio source\n    const sound = new Audio(this.listener);\n    sound.onEnded = () => {\n      console.log(\"Finished sound clip\");\n      that.vuiObj.changeState(\"stop_speaking\");\n      that.toggleSpeakingFunc(false);\n    };\n\n    const f_type = \".mp3\";\n    const loadV = path + this.soundClip.toString() + f_type;\n\n    console.log(\"Load sound path\", loadV);\n\n    this.audioLoader.load(loadV, function (buffer) {\n      console.log(\"Playing sound clip\", that.soundClip);\n\n      if (that.vuiObj !== undefined) {\n        that.vuiObj.changeState(\"speaking\");\n        that.toggleSpeakingFunc(true);\n      }\n\n      sound.setBuffer(buffer);\n      sound.setLoop(false);\n      sound.play();\n\n      that.soundClip++;\n    });\n  };\n\n  addCSSElems = () => {\n    this.phoneCutout = createElemObject(\n      this.cssRef,\n      window.screen.width,\n      window.screen.height,\n      0xffffff,\n      true\n    );\n    this.phoneCutout.position.set(-5, -5, 0);\n    this.scene.add(this.phoneCutout);\n  };\n\n  setupRenderers = () => {\n    // webgl\n    this.renderer = new WebGLRenderer({ antialias: true });\n    this.renderer.setSize(this.windowInfo.width, this.windowInfo.height);\n    this.renderer.shadowMap.enabled = true;\n    this.htmlElem.appendChild(this.renderer.domElement);\n\n    // css\n    this.cssRenderer = new CSS3DRenderer();\n    this.cssRenderer.setSize(window.innerWidth, window.innerHeight);\n    this.cssRenderer.domElement.style.position = \"absolute\";\n    this.cssRenderer.domElement.style.top = 0;\n    this.cssElem.appendChild(this.cssRenderer.domElement);\n  };\n\n  createGridHelper = () => {\n    this.gridHelper = new GridHelper(10, 10);\n    this.scene.add(this.gridHelper);\n    console.log(\"created grid helper\", this.gridHelper);\n  };\n\n  initPostprocessing = () => {\n    this.composer = new EffectComposer(this.renderer);\n    const renderPass = new RenderPass(this.scene, this.camera);\n    this.composer.addPass(renderPass);\n    const outlinePass = new OutlinePass(\n      new Vector2(window.innerWidth, window.innerHeight),\n      this.scene,\n      this.camera\n    );\n    const edgeGlow = 10;\n    outlinePass.edgeStrength = 0;\n    outlinePass.edgeGlow = edgeGlow;\n    outlinePass.edgeThickness = edgeGlow - 1;\n    outlinePass.visibleEdgeColor = new Color(0.8, 0.8, 0.8);\n    outlinePass.downSampleRatio = 1.8;\n    const effectFXAA = new ShaderPass(FXAAShader);\n    effectFXAA.uniforms[\"resolution\"].value.set(\n      1 / window.innerWidth,\n      1 / window.innerHeight\n    );\n    effectFXAA.renderToScreen = true;\n    this.composer.addPass(effectFXAA);\n    this.composer.addPass(outlinePass);\n    this.outlinePass = outlinePass;\n  };\n\n  createLights = () => {\n    this.ambientLight = new AmbientLight(0x404040);\n    this.scene.add(this.ambientLight);\n    var light = new DirectionalLight(0xddffdd, 0.4);\n    light.position.z = 1;\n    light.position.y = 1;\n    light.position.x = 1;\n    this.scene.add(light);\n  };\n\n  createBackground = () => {\n    const textureLoader = new TextureLoader();\n\n    let texture;\n    const path = \"assets/texture/vis-sequence/\";\n    const f_ex = \".png\";\n    var textures = [];\n    for (var i = 1; i <= TEX_MAX; i++) {\n      texture = textureLoader.load(path + i.toString() + f_ex);\n      textures.push(texture);\n    }\n    this.visTextures = textures;\n    const introTexture = textureLoader.load(path + \"intro\" + f_ex);\n    this.visIntroTex = introTexture;\n    console.log(\"Textures\", textures);\n    const geometry = new PlaneGeometry(17, 36);\n    this.bgUniforms = {\n      u_tex1: {\n        value: introTexture, //introTexture,\n      },\n      u_tex2: {\n        value: introTexture,\n      },\n      u_resolution: {\n        value: {\n          x: window.innerWidth,\n          y: window.innerHeight,\n        },\n      },\n      u_useTexLerp: {\n        value: 0.0,\n      },\n      u_time: {\n        value: 0,\n      },\n    };\n    const material = new ShaderMaterial({\n      uniforms: this.bgUniforms,\n      vertexShader: bg_vshader,\n      fragmentShader: bg_fshader,\n      transparent: true,\n    });\n    const mesh = new Mesh(geometry, material);\n    mesh.position.set(-20, -1.5, 0);\n    this.scene.add(mesh);\n  };\n\n  lerpBackground = () => {\n    if (this.bgUniforms === undefined) return;\n\n    var that = this;\n    const tl = gsap.timeline({\n      onComplete: function () {},\n    });\n    this.bgUniforms.u_useTexLerp.value = 0.0;\n    tl.to(this.bgUniforms.u_useTexLerp, {\n      value: 1.0,\n      duration: 2,\n      ease: \"sine.out\",\n    });\n  };\n\n  changeState = (vuiState, visState, playVuiSounds) => {\n    if (playVuiSounds) {\n      this.playSound();\n    }\n\n    this.vuiObj.changeState(vuiState);\n\n    if (visState < 0) return;\n    this.bgUniforms.u_tex1.value = this.bgUniforms.u_tex2.value;\n    if (visState > TEX_MAX) {\n      this.bgUniforms.u_tex2.value = this.visIntroTex;\n    } else {\n      this.bgUniforms.u_tex2.value = this.visTextures[visState - 1];\n    }\n    // visState == 0 => directly lerp\n    this.lerpBackground();\n  };\n\n  renderScene = () => {\n    this.renderer.render(this.scene, this.camera);\n    this.cssRenderer.render(this.scene, this.camera);\n  };\n\n  handleResize = (newWidth, newHeight) => {\n    this.camera.aspect = newWidth / newHeight;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(newWidth, newHeight);\n    this.cssRenderer.setSize(newWidth, newHeight);\n    this.bgUniforms.u_resolution.value.x = newWidth;\n    this.bgUniforms.u_resolution.value.y = newHeight;\n  };\n\n  update = () => {\n    this.controls.update();\n    this.rafId = requestAnimationFrame(this.update);\n    if (this.vuiObj !== undefined) {\n      this.vuiObj.update(this.clock.getDelta());\n    }\n    this.bgUniforms.u_time.value = this.clock.getElapsedTime();\n    this.composer.render();\n    this.cssRenderer.render(this.scene, this.camera);\n  };\n\n  render = (render) => {\n    if (this.isRendering === render) return;\n    this.isRendering = render;\n    if (render) {\n      this.update();\n    } else {\n      cancelAnimationFrame(this.rafId);\n    }\n  };\n}\n","import {\n  Object3D,\n  MeshPhongMaterial,\n  Mesh,\n  NoBlending,\n  BoxGeometry,\n} from \"three\";\nimport { CSS3DObject } from \"three/examples/jsm/renderers/CSS3DRenderer\";\n\n// returns a Object3D that has a mesh and a css3D object\nexport const createElemObject = (\n  domRef,\n  width,\n  height,\n  planeColor,\n  opacity,\n  clipPlane = false\n) => {\n  // console.log('Creating meshcss with dom ref', domRef, width, height);\n\n  // styling the dom element\n  domRef.style.width = width + \"px\";\n  domRef.style.height = height + \"px\";\n  domRef.style.opacity = 0.999;\n  domRef.style.boxSizing = \"border-box\";\n\n  // we use a \"container\" to chain together the mesh and css3dobj\n  var obj = new Object3D();\n  obj.scale.set(0.1, 0.1, 0.1);\n  var css3dObject = new CSS3DObject(domRef);\n  obj.css3dObject = css3dObject;\n  obj.add(css3dObject);\n\n  if (clipPlane) {\n    // clip a WebGL geometry with it.\n    var material = new MeshPhongMaterial({\n      opacity: opacity,\n      color: planeColor,\n      blending: NoBlending,\n    });\n    var geometry = new BoxGeometry(width, height, 1);\n    var mesh = new Mesh(geometry, material);\n    mesh.castShadow = true;\n    mesh.receiveShadow = true;\n\n    obj.lightShadowMesh = mesh;\n    obj.add(mesh);\n  }\n\n  // console.log('Returned object: ', obj);\n  return obj;\n};\n","export const bg_vshader = `\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\nvarying float v_wave;\nuniform float u_time;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v) {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n           \n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  \n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  \n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\t\n  v_uv = uv;\n  v_position = position;\n  v_normal = normal;\n\n  vec3 pos = position;\n  float noiseFreq = 0.05;\n  float noiseAmp = 0.01; \n  vec3 noisePos = vec3(pos.x* noiseFreq + u_time , pos.y , pos.z);\n  pos.z += snoise(noisePos) * noiseAmp;\n  v_wave = pos.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n}\n`;\n\nexport const bg_fshader = `\nuniform sampler2D u_tex1;\nuniform sampler2D u_tex2;\nuniform vec2 u_resolution;\nuniform float u_useTexLerp;\nuniform float u_time;\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\nvarying float v_wave;\n\nvoid main (void)\n{\n  float wave = v_wave * 0.25;\n  vec3 mapped1 = texture2D(u_tex1, v_uv ).rgb;\n  vec3 mapped2 = texture2D(u_tex2, v_uv ).rgb;\n  vec3 color = mix(mapped1, mapped2, u_useTexLerp);\n  gl_FragColor = vec4(color, 1); \n}\n`;\n","export const vis_vui_instructions = [\n  {\n    vui_texts: [\n      \"Ok, lets go to a different place together, a more peaceful place. \",\n      \"Imagine you are at a lake, the waters are calm, and the current is mild. You can feel a light breeze passing by you.\",\n      \"What do you hear? \",\n    ],\n  },\n  {\n    vui_texts: [\n      \"And the weather? It is a warm day, comfortable but not hot at all, nearing sunset. From where you sit, you can see the whole landscape around you. \",\n      \"What colors do you imagine?\",\n    ],\n  },\n  {\n    vui_texts: [\n      \"Our landscape is beginning to come together. The hills have tall green grass on them. When you focus in you can see the grass moving slowly in the wind. \",\n      \"Imagine you are looking up, you see some blue birds flying through the clouds above you. What else do you see?\",\n    ],\n  },\n  {\n    vui_texts: [\n      \"Now lets take some time to relax in the personal landscape that we've created. \",\n      \"Notice where your body touches the grass and your feet meet the ground. Feel the weight of your arms and hands resting. Acknowledge your senses: notice anything you can smell, hear or taste, sensations of heat or cold.\",\n      \"What are you feeling right now?\",\n    ],\n  },\n  {\n    vui_texts: [\"Do you want to continue the visualization? \"],\n  },\n  {\n    vui_texts: [\n      \"Okay, I hope you feel proud of yourself for getting through this.\",\n      \"Do you want to share what brought you here today? \",\n    ],\n  },\n  {\n    vui_texts: [\n      \"I see, thank you for sharing that with me. You will be okay and I will always be here for you. \",\n      \"Would you like to share this session with your therapist?\",\n    ],\n  },\n];\n","export const monthNames = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n","import { NavLink } from \"react-router-dom\";\nimport \"../styles/navigation.css\";\n\nexport default function NavigationBar() {\n  return (\n    <div id=\"header__container row\">\n      <div id=\"navigation__container\">\n        <div id=\"nav__content\">\n          <div class=\"column narrow__left\" id=\"nav__content__left\">\n            <NavLink className=\"nav__route\" to=\"/CDT-project-01\">\n              <span id=\"logo__text\">Nova</span>\n            </NavLink>\n          </div>\n\n          <div class=\"column wide__right\" id=\"nav__content__right\">\n            <NavLink className=\"nav__route\" to=\"/nova\">\n              Meet Nova\n            </NavLink>\n            <NavLink className=\"nav__route\" to=\"/matrix\">\n              State Matrix\n            </NavLink>\n            <NavLink className=\"nav__route\" to=\"/about\">\n              About\n            </NavLink>\n          </div>\n        </div>\n      </div>\n      <hr></hr>\n    </div>\n  );\n}\n","export const user_instructions = [\n  \"Nova, I need help.\",\n  \"Visualization.\",\n  \"I hear the ripples of the water.\",\n  \"The sky is becoming brighter.\",\n  \"(Continued) I can see the light blue water, some white clouds, and some green hills and trees.\",\n  \"I see some water lilies near me.\",\n  \"Im feeling calmer now.\",\n  \"No, Im alright. \",\n  \"I was feeling really overwhelmed by my classes and my work. I think I took on too much this semester and then it just all started crashing down on me.\",\n];\n","import \"../App.css\";\nimport \"../styles/reactTransition.css\";\nimport \"../styles/utility.css\";\nimport \"../styles/vui.css\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport WebGLApp from \"../webgl/webgl-app\";\nimport { useSelector } from \"react-redux\";\n\n// speech rec stuff\nimport { useDispatch } from \"react-redux\";\nimport SpeechRecognition, {\n  useSpeechRecognition,\n} from \"react-speech-recognition\";\nimport { changeVUIState } from \"../actions\";\nimport \"../styles/utility.css\";\nimport { capitalizeFirstLetter } from \"../utility/string\";\n\n// animations\nimport gsap, { Power2 } from \"gsap\";\nimport { DEBUG_STATES } from \"../utility/debug\";\nimport { vis_vui_instructions } from \"../speech/vui-instructions\";\nimport { UserScript } from \"../components/userScript\";\nimport { monthNames } from \"../utility/date\";\nimport { Link } from \"react-router-dom\";\nimport NavigationBar from \"../components/navigation\";\nimport { user_instructions } from \"../speech/user-instructions\";\n\n// debug\n\nfunction VUI() {\n  // state\n  const vuiState = useSelector((state) => state.vuiState);\n  const dispatch = useDispatch();\n\n  // webgl\n  const containerRef = useRef(null);\n  const webglApp = useRef(null);\n  const phoneCutoutRef = useRef(null);\n  const cssContainerRef = useRef(null);\n\n  // data\n  const [userText, setUserText] = useState(\"\");\n  const d = new Date();\n  const [vuiTextArr, setVuiText] = useState([\n    \"Welcome, it's \" +\n      monthNames[d.getMonth()] +\n      \" \" +\n      d.getDate() +\n      \", \" +\n      d.getFullYear() +\n      \".\",\n  ]);\n  const convoRef = useRef();\n  const [instructionTextArr, setInstructionText] = useState([]);\n  // the last phase that is displayed\n  const [instructionTextNum, setInstructionNum] = useState(0);\n  // user's phase stage\n  const [userTextNum, setUserTextNum] = useState(0);\n  const [vuiTalking, setVuiTalking] = useState(false);\n\n  useEffect(() => {\n    setInstructionNum(userTextNum);\n    console.log(\"Set instruction text to\", userTextNum);\n  }, [userTextNum, instructionTextNum]);\n\n  useEffect(() => {\n    let endIndex = instructionTextNum + 2;\n\n    if (endIndex >= user_instructions.length) {\n      console.log(\"Reached end of instruction\");\n      return;\n    }\n\n    let newArr = [];\n    for (var i = instructionTextNum; i <= endIndex; i++) {\n      newArr.push(user_instructions[i]);\n    }\n    setInstructionText(newArr);\n    console.log(\"Set new instruction text arr to\", newArr);\n  }, [instructionTextNum]);\n\n  useEffect(() => {\n    if (containerRef.current === null) return;\n    if (webglApp.current !== null) return;\n    console.log(\"Initializing GL with: \", containerRef.current);\n\n    function onWindowResize() {\n      webglApp.current.handleResize(window.innerWidth, window.innerHeight);\n    }\n\n    webglApp.current = new WebGLApp(\n      containerRef.current,\n      cssContainerRef.current,\n      phoneCutoutRef.current,\n      {\n        width: window.innerWidth,\n        height: window.innerHeight,\n      },\n      setVuiTalking\n    );\n    webglApp.current.setup();\n    webglApp.current.render(true);\n    window.addEventListener(\"resize\", onWindowResize, false);\n    document.addEventListener(\"keydown\", handleStartListen, false);\n    document.addEventListener(\"keyup\", handleStopListen, false);\n\n    return () => {\n      webglApp.current.render(false);\n      window.removeEventListener(\"resize\", onWindowResize, false);\n      document.removeEventListener(\"keydown\", handleStartListen, false);\n      document.removeEventListener(\"keyup\", handleStopListen, false);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (\n      webglApp.current !== undefined &&\n      webglApp.current !== null &&\n      webglApp.current.vuiObj !== undefined &&\n      webglApp.current.vuiObj !== null\n    ) {\n      console.log(vuiState.vuiState);\n      webglApp.current.changeState(\n        vuiState.vuiState.vuiStateStr,\n        vuiState.vuiState.visState,\n        vuiState.vuiState.playSound\n      );\n    }\n  }, [vuiState]);\n\n  const increaseInstructionText = () => {\n    let num = userTextNum + 1;\n    setUserTextNum(num);\n\n    console.log(\"User text changed to\", num);\n  };\n\n  const animateTextOut = (callbackFunc, delay = 5) => {\n    const fullCallBack = () => {\n      increaseInstructionText();\n      callbackFunc();\n    };\n    const tl = gsap.timeline({ onComplete: fullCallBack, delay: delay });\n    tl.to(convoRef.current, {\n      opacity: 0,\n      duration: 2,\n      ease: Power2.easeInOut,\n    });\n  };\n  const animateTextIn = () => {\n    const tl = gsap.timeline();\n    tl.to(convoRef.current, {\n      opacity: 1,\n      duration: 2,\n      ease: Power2.easeInOut,\n    });\n  };\n\n  const needHelpOnComp = () => {\n    setVuiText([\n      \"Hi Caitlyn, you will get through this moment. I am always here for you and to guide you. \",\n      \"Would you like to do a visualization or a sensory exercise? \",\n    ]);\n    setUserText(\"\");\n    dispatch(changeVUIState(\"appearing\", -10, true), [dispatch]);\n    animateTextIn();\n  };\n\n  const visualizationOnComp = () => {\n    setVuiText(vis_vui_instructions[0].vui_texts);\n    setUserText(\"\");\n    dispatch(changeVUIState(\"activate_visualization\", 1, true), [dispatch]);\n    animateTextIn();\n  };\n\n  const ripplesOnComp = () => {\n    setVuiText(vis_vui_instructions[1].vui_texts);\n    setUserText(\"\");\n    dispatch(changeVUIState(\"visualization\", 3, true), [dispatch]);\n    animateTextIn();\n  };\n\n  const blueWaterOnComp = () => {\n    setVuiText(vis_vui_instructions[2].vui_texts);\n    setUserText(\"\");\n    dispatch(changeVUIState(\"visualization\", 9, true), [dispatch]);\n    animateTextIn();\n  };\n\n  const liliesOnComp = () => {\n    setVuiText(vis_vui_instructions[3].vui_texts);\n    setUserText(\"\");\n    dispatch(changeVUIState(\"visualization\", 13, true), [dispatch]);\n    animateTextIn();\n  };\n\n  const calmerOnComp = () => {\n    setVuiText(vis_vui_instructions[4].vui_texts);\n    setUserText(\"\");\n    dispatch(changeVUIState(\"visualization\", 13, true), [dispatch]);\n    animateTextIn();\n  };\n\n  const commands = [\n    {\n      command: \"Nova I need help\",\n      callback: () => {\n        dispatch(changeVUIState(\"appearing\", -10, false), [dispatch]);\n        animateTextOut(needHelpOnComp, 2);\n      },\n    },\n    // begin visualization, phase 0\n    {\n      command: \"(a) visualization\",\n      callback: () => {\n        animateTextOut(visualizationOnComp);\n      },\n    },\n    // phrase 1\n    {\n      command: \"I hear the ripples of the water\",\n      callback: () => {\n        animateTextOut(ripplesOnComp);\n      },\n    },\n    // phase 2\n    {\n      command: \"* sky is becoming brighter\",\n      callback: () => {\n        dispatch(changeVUIState(\"visualization\", 5, false), [dispatch]);\n        increaseInstructionText();\n      },\n    },\n    {\n      command: \"* light blue water *\",\n      callback: () => {\n        animateTextOut(blueWaterOnComp);\n      },\n    },\n    // phase 3\n    {\n      command: \"* water lilies *\",\n      callback: () => {\n        animateTextOut(liliesOnComp);\n      },\n    },\n    // phase 4\n    {\n      command: \"* feeling calmer *\",\n      callback: () => {\n        animateTextOut(calmerOnComp);\n      },\n    },\n    // phase 5\n    {\n      command: \"No I'm alright\",\n      callback: () => {\n        const onComp = () => {\n          setVuiText(vis_vui_instructions[5].vui_texts);\n          setUserText(\"\");\n          dispatch(changeVUIState(\"no_change\", 13, true), [dispatch]);\n          animateTextIn();\n        };\n        animateTextOut(onComp);\n      },\n    },\n    // phase 6\n    {\n      command: \"I was feeling overwhelmed *\",\n      callback: () => {\n        const onComp = () => {\n          setVuiText(vis_vui_instructions[6].vui_texts);\n          setUserText(\"\");\n          dispatch(changeVUIState(\"finish_visualization\", 20, true), [\n            dispatch,\n          ]);\n          animateTextIn();\n        };\n        animateTextOut(onComp);\n      },\n    },\n    {\n      command: \"I don't know\",\n      callback: () => {\n        setVuiText([\n          \"Lets focus on using an exercise to calm your anxiety right now.\",\n          \"Which exercise would you like to do, a visualization or a sensory exercise?\",\n        ]);\n        dispatch(changeVUIState(\"static\", -10), [dispatch]);\n      },\n    },\n  ];\n  const {\n    transcript,\n    listening,\n    resetTranscript,\n    browserSupportsSpeechRecognition,\n  } = useSpeechRecognition({ commands, isFuzzyMatch: true });\n\n  const handleStartListen = (event) => {\n    if (vuiTalking) {\n      return;\n    }\n\n    if (event.repeat) {\n      return;\n    }\n\n    console.log(\"Start listen\");\n    SpeechRecognition.startListening({ continuous: true });\n    resetTranscript();\n    dispatch(changeVUIState(\"listening\", -10, false), [dispatch]);\n  };\n\n  const handleStopListen = () => {\n    if (vuiTalking) {\n      return;\n    }\n\n    console.log(\"Stop listen\");\n    SpeechRecognition.stopListening();\n    if (transcript === \"\") return;\n    dispatch(changeVUIState(\"stop_listening\", -10, false), [dispatch]);\n    setUserText(capitalizeFirstLetter(transcript) + \".\", true);\n  };\n\n  if (!browserSupportsSpeechRecognition) {\n    return <span>Browser doesn't support speech recognition.</span>;\n  }\n\n  return (\n    <div className=\"VUI\">\n      <div id=\"webgl\" ref={containerRef}></div>\n      <div id=\"css\" ref={cssContainerRef}></div>\n      <img\n        src=\"./images/iphone_cutout_color.png\"\n        id=\"iphoneCutout\"\n        alt=\"oops\"\n        ref={phoneCutoutRef}\n      ></img>\n      <div className=\"root\">\n        <NavigationBar />\n        <div className=\"row\">\n          <div className=\"column left\" id=\"VUI_UI_container\">\n            <div className=\"conversation__container\" ref={convoRef}>\n              {vuiTextArr.map((text, i) => (\n                <span className=\"transcript__text__vui\" key={i}>\n                  {text}\n                </span>\n              ))}\n\n              {listening ? (\n                <span className=\"transcript__text__user\"> {transcript}</span>\n              ) : (\n                <span className=\"transcript__text__user\"> {userText}</span>\n              )}\n            </div>\n          </div>\n          <div className=\"column right\" id=\"info__container\">\n            <div id=\"info__content\">\n              <div id=\"about__container\">\n                <div>\n                  {\" \"}\n                  <h1> Visualization Exercise </h1>\n                  <hr></hr>\n                </div>\n\n                <p>\n                  {\" \"}\n                  The Visualization Exercise gives you the opportunity to\n                  co-create a personal landscape with Nova. Nova will guide you\n                  through this sensory experience with ambient sound, calming\n                  visuals, and breathing exercises.{\" \"}\n                </p>\n              </div>\n              <div id=\"instructions__container\">\n                <h2>Speak the script below to engage with Nova.</h2>\n                <hr></hr>\n                <div id=\"instructions__texts\">\n                  {\" \"}\n                  {instructionTextArr.map((text, i) => (\n                    <span className=\"instruction__text\" key={i}>\n                      {text}\n                    </span>\n                  ))}\n                </div>\n\n                <hr></hr>\n              </div>\n              <div id=\"manual__helper\">\n                {vuiTalking ? (\n                  <h2>\n                    {\" \"}\n                    Nova is currently talking. You can engage with Nova after\n                    they finish.{\" \"}\n                  </h2>\n                ) : (\n                  <h2>\n                    {\" \"}\n                    Hold the <span id=\"highlight__text\"> spacebar </span> to\n                    speak.{\" \"}\n                  </h2>\n                )}\n                <p>Microphone is currently {listening ? \"on\" : \"off\"}.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default VUI;\n\n/**\n * \n * \n * \n          <div className=\"buttons__container\">\n            {DEBUG_STATES && (\n              <button onClick={testLerp}> Lerp Background </button>\n            )}\n          </div>\n\n        {DEBUG_STATES && (\n          <div className=\"helpers__container\">\n            <StateDebugger webglApp={webglApp} />\n          </div>\n        )}\n\n\n\n  const testLerp = () => {\n    webglApp.current.lerpBackground();\n  };\n */\n","export function capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import gsap, { Power2 } from \"gsap\";\n\nconst getDefaultTimeline = (node, delay, original, dest) => {\n  const timeline = gsap.timeline({ paused: true });\n  timeline.set(node, { opacity: original });\n  timeline.to(node, {\n    opacity: dest,\n    duration: 1.5,\n    ease: Power2.easeInOut,\n    delay: delay,\n  });\n  timeline.then(() => {\n    console.log(\"Finished page transition animation\");\n  });\n  return timeline;\n};\n\nexport const playTransitionIn = (pathname, node) => {\n  const delay = 1;\n  const timeline = getDefaultTimeline(node, delay, 0, 1);\n  timeline.play();\n};\n\nexport const playTransitionOut = (pathname, node) => {\n  const delay = 0;\n  const timeline = getDefaultTimeline(node, delay, 1, 0);\n  timeline.play();\n};\n","import NavigationBar from \"../components/navigation\";\nimport \"../styles/matrix.css\";\n\nexport default function Matrix() {\n  return (\n    <div id=\"matrix__root\">\n      <NavigationBar />\n      <p> This is the matrix page. </p>\n    </div>\n  );\n}\n","import NavigationBar from \"../components/navigation\";\nimport \"../styles/process.css\";\n\nexport default function About() {\n  return (\n    <div id=\"process__root\">\n      <NavigationBar />\n      <p> This is about page. </p>\n    </div>\n  );\n}\n","import \"./styles/app.css\";\nimport React from \"react\";\nimport Landing from \"./Pages/Landing\";\nimport VUI from \"./Pages/VUI\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { TransitionGroup, Transition } from \"react-transition-group\";\nimport { playTransitionIn, playTransitionOut } from \"./utility/animation\";\nimport Matrix from \"./Pages/Matrix\";\nimport About from \"./Pages/About\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Route\n          render={({ location }) => {\n            const { pathname, key } = location;\n            return (\n              <TransitionGroup component={null}>\n                <Transition\n                  native\n                  key={key}\n                  appear={true}\n                  onEnter={(node) => playTransitionIn(pathname, node)}\n                  onExiting={(node) => playTransitionOut(pathname, node)}\n                  timeout={{ enter: 300, exit: 350 }}\n                >\n                  <Switch location={location}>\n                    <Route exact path=\"/CDT-project-01\" component={Landing} />\n                    <Route path=\"/nova\" component={VUI} />\n                    <Route path=\"/matrix\" component={Matrix} />\n                    <Route path=\"/about\" component={About} />\n                  </Switch>\n                </Transition>\n              </TransitionGroup>\n            );\n          }}\n        ></Route>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const DEFAULT_STATE = {\n  vuiState: {\n    vuiStateStr: \"none\",\n    visState: -10,\n    playSound: false,\n  },\n  isSpeaking: false,\n  userName: \"User\",\n};\n","import { DEFAULT_STATE } from \"./defaultState\";\nimport { combineReducers } from \"redux\";\n\nconst vuiStateReducer = (state = DEFAULT_STATE, action) => {\n  switch (action.type) {\n    case \"VUI_STATE_CHANGE\":\n      return {\n        ...state,\n        vuiState: {\n          vuiStateStr: action.payload.stateStr,\n          visState: action.payload.visState,\n          playSound: action.payload.playSound,\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nconst soundStateReducer = (state = DEFAULT_STATE, action) => {\n  switch (action.type) {\n    case \"SOUND_STATE_CHANGE\":\n      return {\n        ...state,\n        soundsState: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst userNameReducer = (state = DEFAULT_STATE, action) => {\n  switch (action.type) {\n    case \"USER_NAME_CHANGE\":\n      console.log(\"user name change\");\n      return {\n        ...state,\n        userName: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst visPhaseReducer = (state = DEFAULT_STATE, action) => {\n  switch (action.type) {\n    case \"VIS_PHASE_CHANGE\":\n      console.log(\"Visualization phase has changed to\", action.payload);\n      return {\n        ...state,\n        visPhaseInt: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst allReducers = combineReducers({\n  vuiState: vuiStateReducer,\n  soundState: soundStateReducer,\n  username: userNameReducer,\n  visPhase: visPhaseReducer,\n});\n\nexport default allReducers;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { createStore } from \"redux\";\nimport allReducers from \"./reducers\";\nimport { Provider } from \"react-redux\";\n\nlet store = createStore(\n  allReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}